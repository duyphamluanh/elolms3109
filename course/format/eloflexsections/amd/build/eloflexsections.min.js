define(["jquery","core/log","core/str"],function(e,t,o){"use strict";var s=function(e,t,o){"local"==o?window.localStorage.setItem("sections-toggle-"+e,JSON.stringify(t)):"session"==o&&window.sessionStorage.setItem("sections-toggle-"+e,JSON.stringify(t))};return{init:function(o){t.debug("Format eloflexsections AMD module initialized"),e(document).ready(function(e){var t,n,i=o.keepstateoversession;n=1==i?"local":"session",t=function(e,t){var o;return"local"==t?o=window.localStorage.getItem("sections-toggle-"+e):"session"==t&&(o=window.sessionStorage.getItem("sections-toggle-"+e)),null===o?{}:JSON.parse(o)}(o.course,n),setTimeout(function(){Object.keys(t).forEach(t=>{e("#"+t).collapse("show")})},100),e(".collapse").on("show.bs.collapse",function(i){var r=e(i.target).attr("id"),l=r.substring(r.lastIndexOf("-")+1);t.hasOwnProperty(l)||(t[l]="true",s(o.course,t,n))}),e(".collapse").on("hide.bs.collapse",function(i){var r=e(i.target).attr("id"),l=r.substring(r.lastIndexOf("-")+1);t.hasOwnProperty(l)&&(delete t[l],s(o.course,t,n))})})}}});